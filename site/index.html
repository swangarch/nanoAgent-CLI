<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»Šæ—¥å‡ºè¡Œå åœ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 500px;
            width: 90%;
        }

        .title {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .subtitle {
            color: #666;
            font-size: 1.2em;
            margin-bottom: 30px;
        }

        .crystal {
            width: 120px;
            height: 120px;
            margin: 20px auto;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            border-radius: 50%;
            animation: rotate 4s linear infinite;
            cursor: pointer;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }

        .crystal:hover {
            transform: scale(1.1);
        }

        .crystal::before {
            content: 'ğŸ”®';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3em;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(0,0,0,0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .result {
            margin-top: 30px;
            padding: 20px;
            border-radius: 15px;
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .result.good {
            background: linear-gradient(135deg, #56ab2f, #a8e6cf);
            color: white;
        }

        .result.bad {
            background: linear-gradient(135deg, #ff6b6b, #ffa726);
            color: white;
        }

        .result.neutral {
            background: linear-gradient(135deg, #ffd89b, #19547b);
            color: white;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .loading {
            display: none;
            margin: 20px auto;
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        .advice {
            margin-top: 15px;
            font-size: 1.1em;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <h1 class="title">ğŸ”® ä»Šæ—¥å‡ºè¡Œå åœ</h1>
        <p class="subtitle">è®©ç¥ç§˜çš„å®‡å®™æŒ‡å¼•ä½ çš„æ–¹å‘</p>
        
        <div class="crystal" onclick="startDivination()"></div>
        
        <button class="btn" onclick="startDivination()">å¼€å§‹å åœ</button>
        <button class="btn" onclick="viewHistory()">æŸ¥çœ‹å†å²</button>
        
        <div class="loading" id="loading"></div>
        
        <div class="result" id="result">
            <h2 id="resultTitle"></h2>
            <p id="resultText"></p>
            <div class="advice" id="advice"></div>
        </div>
    </div>

    <script>
        // åˆ›å»ºæ˜Ÿç©ºèƒŒæ™¯
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        // è·å–ä»Šæ—¥ä¿¡æ¯
        function getTodayInfo() {
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);
            const dayOfWeek = today.getDay();
            const hour = today.getHours();
            
            return {
                date: today.toLocaleDateString('zh-CN'),
                dayOfYear,
                dayOfWeek,
                hour,
                isWeekend: dayOfWeek === 0 || dayOfWeek === 6
            };
        }

        // ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼ˆåŸºäºæ—¥æœŸï¼‰
        function seededRandom(seed) {
            const x = Math.sin(seed) * 10000;
            return x - Math.floor(x);
        }

        // å¼€å§‹å åœ
        function startDivination() {
            const loading = document.getElementById('loading');
            const result = document.getElementById('result');
            
            loading.style.display = 'block';
            result.style.display = 'none';
            
            setTimeout(() => {
                loading.style.display = 'none';
                performDivination();
            }, 2000);
        }

        // æ‰§è¡Œå åœ
        function performDivination() {
            const today = getTodayInfo();
            const result = document.getElementById('result');
            const resultTitle = document.getElementById('resultTitle');
            const resultText = document.getElementById('resultText');
            const advice = document.getElementById('advice');
            
            // åŸºäºå¤šä¸ªå› ç´ ç”Ÿæˆä¼ªéšæœºç»“æœ
            const seed = today.dayOfYear * today.dayOfWeek + today.hour;
            const random = seededRandom(seed);
            
            let prediction, adviceText;
            
            if (random < 0.3) {
                // ä¸é€‚åˆå‡ºè¡Œ
                prediction = 'âš ï¸ ä¸å®œå‡ºè¡Œ';
                result.className = 'result bad';
                adviceText = getBadAdvice(today);
            } else if (random < 0.7) {
                // é€‚åˆå‡ºè¡Œ
                prediction = 'âœ… é€‚å®œå‡ºè¡Œ';
                result.className = 'result good';
                adviceText = getGoodAdvice(today);
            } else {
                // ä¸­æ€§ï¼Œéœ€è¦è°¨æ…è€ƒè™‘
                prediction = 'ğŸ¤” è°¨æ…è€ƒè™‘';
                result.className = 'result neutral';
                adviceText = getNeutralAdvice(today);
            }
            
            resultTitle.textContent = `${today.date} - ${prediction}`;
            resultText.textContent = getDivinationText(random, today);
            advice.textContent = adviceText;
            
            result.style.display = 'block';
            
            // ä¿å­˜å åœå†å²
            saveDivinationHistory(today, prediction);
        }

        // è·å–å¥½çš„å»ºè®®
        function getGoodAdvice(today) {
            const advices = [
                'ä»Šæ—¥æ˜Ÿå…‰ç’€ç’¨ï¼Œæ­£æ˜¯å‡ºè¡Œçš„å¥½æ—¶æœºï¼è®°å¾—å¸¦ä¸Šæ„‰å¿«çš„å¿ƒæƒ…ã€‚',
                'å®‡å®™èƒ½é‡æ­£å‘æµåŠ¨ï¼Œé€‚åˆè¸ä¸Šæ–°çš„æ—…ç¨‹ã€‚ç¥ä½ ä¸€è·¯å¹³å®‰ï¼',
                'å‰æ˜Ÿé«˜ç…§ï¼Œä¸‡äº‹å¦‚æ„ã€‚ä»Šå¤©çš„å‡ºè¡Œå°†ä¼šå¸¦æ¥æ„å¤–çš„æ”¶è·ã€‚',
                'å¤©æ—¶åœ°åˆ©äººå’Œï¼Œä»Šæ—¥å‡ºè¡Œå¿…å°†æœ‰ç¾å¥½çš„ç»å†ç­‰ç€ä½ ã€‚',
                'æ˜Ÿè¾°æŒ‡å¼•æ–¹å‘ï¼Œä»Šå¤©çš„æ—…ç¨‹å°†å……æ»¡æƒŠå–œå’Œå¹¸è¿ã€‚'
            ];
            return advices[Math.floor(seededRandom(today.dayOfYear + 1) * advices.length)];
        }

        // è·å–åçš„å»ºè®®
        function getBadAdvice(today) {
            const advices = [
                'ä»Šæ—¥ä¸å®œå‡ºè¡Œï¼Œå»ºè®®åœ¨å®¶ä¸­é™å¿ƒæ€è€ƒï¼Œç­‰å¾…æ›´å¥½çš„æ—¶æœºã€‚',
                'å®‡å®™èƒ½é‡ä¸ç¨³å®šï¼Œæœ€å¥½æ¨è¿Ÿè¡Œç¨‹ï¼Œç¡®ä¿è‡ªèº«å®‰å…¨ã€‚',
                'æ˜Ÿè±¡æ˜¾ç¤ºä»Šæ—¥æœ‰é˜»ç¢ï¼Œä¸å¦¨é‡æ–°å®‰æ’ä½ çš„å‡ºè¡Œè®¡åˆ’ã€‚',
                'ä»Šæ—¥æ°”åœºè¾ƒä¸ºæ··ä¹±ï¼Œå»ºè®®æš‚ç¼“å‡ºè¡Œï¼Œå±…å®¶ä¿®å…»ä¸ºå®œã€‚',
                'ä¸å®œè¿œè¡Œï¼Œå¯å°è¯•åœ¨å®¶é™„è¿‘æ´»åŠ¨ï¼Œé¿å¼€ä¸å¿…è¦çš„éº»çƒ¦ã€‚'
            ];
            return advices[Math.floor(seededRandom(today.dayOfYear + 2) * advices.length)];
        }

        // è·å–ä¸­æ€§çš„å»ºè®®
        function getNeutralAdvice(today) {
            const advices = [
                'ä»Šæ—¥å‡ºè¡Œéœ€è°¨æ…ï¼Œå»ºè®®åšå¥½å……åˆ†å‡†å¤‡ï¼Œéšæœºåº”å˜ã€‚',
                'æ˜¯å‰æ˜¯å‡¶åœ¨äºäººå¿ƒï¼Œä»¥å¹³å¸¸å¿ƒå¯¹å¾…ä»Šå¤©çš„è¡Œç¨‹ã€‚',
                'é€‚åˆçŸ­è·ç¦»å‡ºè¡Œï¼Œé¿å…å†’é™©ä¸¾åŠ¨ï¼Œç¨³ä¸­æ±‚è¿›ã€‚',
                'ä»Šæ—¥è™½æœ‰é˜»ç¢ï¼Œä½†é€šè¿‡åŠªåŠ›ä»å¯åŒ–é™©ä¸ºå¤·ã€‚',
                'è°¨æ…è¡Œäº‹ï¼Œå¤šå¬å–ä»–äººæ„è§ï¼Œå°†æœ‰åŠ©ä½ çš„å‡ºè¡Œã€‚'
            ];
            return advices[Math.floor(seededRandom(today.dayOfYear + 3) * advices.length)];
        }

        // è·å–å åœæ–‡æœ¬
        function getDivinationText(random, today) {
            const texts = [
                'æ°´æ™¶çƒæ˜¾ç¤ºï¼Œä½ çš„å‡ºè¡Œå°†å……æ»¡æ„æƒ³ä¸åˆ°çš„è½¬æŠ˜ã€‚',
                'å¡”ç½—ç‰ŒæŒ‡å‘æœªæ¥ï¼Œä»Šå¤©çš„æ—…ç¨‹å°†è€ƒéªŒä½ çš„æ™ºæ…§ã€‚',
                'æ˜Ÿè¾°è¿è½¬æ­ç¤ºï¼Œå‡ºè¡Œçš„æ—¶æœºéœ€è¦æ›´ç²¾å‡†çš„æŠŠæ¡ã€‚',
                'å®‡å®™çš„å¥¥ç§˜æš—ç¤ºï¼Œé‡è¦çš„å†³å®šå°±åœ¨ä»Šå¤©ã€‚',
                'ç¥ç§˜åŠ›é‡ä¸ºä½ æŒ‡å¼•ï¼Œè€å¿ƒç­‰å¾…æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚'
            ];
            return texts[Math.floor(seededRandom(today.dayOfYear + 4) * texts.length)];
        }

        // ä¿å­˜å åœå†å²
        function saveDivinationHistory(today, prediction) {
            const history = JSON.parse(localStorage.getItem('divinationHistory') || '[]');
            history.unshift({
                date: today.date,
                prediction: prediction,
                timestamp: new Date().getTime()
            });
            
            // åªä¿ç•™æœ€è¿‘10æ¬¡è®°å½•
            if (history.length > 10) {
                history.splice(10);
            }
            
            localStorage.setItem('divinationHistory', JSON.stringify(history));
        }

        // æŸ¥çœ‹å†å²
        function viewHistory() {
            const history = JSON.parse(localStorage.getItem('divinationHistory') || '[]');
            
            if (history.length === 0) {
                alert('è¿˜æ²¡æœ‰å åœå†å²è®°å½•ï¼Œå¿«æ¥è¿›è¡Œç¬¬ä¸€æ¬¡å åœå§ï¼');
                return;
            }
            
            let historyText = 'æœ€è¿‘çš„å åœå†å²ï¼š\n\n';
            history.forEach((record, index) => {
                const date = new Date(record.timestamp).toLocaleString('zh-CN');
                historyText += `${index + 1}. ${record.date} - ${record.prediction}\n   æ—¶é—´ï¼š${date}\n\n`;
            });
            
            alert(historyText);
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.onload = function() {
            createStars();
            console.log('ğŸ”® ä»Šæ—¥å‡ºè¡Œå åœç½‘ç«™å·²åŠ è½½å®Œæˆï¼');
        };
    </script>
</body>
</html>
